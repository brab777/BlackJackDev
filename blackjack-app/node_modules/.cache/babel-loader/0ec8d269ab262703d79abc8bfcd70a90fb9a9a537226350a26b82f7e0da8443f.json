{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jonathan\\\\Documents\\\\GitHub\\\\BlackJackDev\\\\blackjack-app\\\\src\\\\UnityComponent.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect } from 'react';\nimport * as player from './playerClient';\nimport io from 'socket.io-client';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UnityComponent = () => {\n  _s();\n  useEffect(() => {\n    const container = document.querySelector(\"#unity-container\");\n    const canvas = document.querySelector(\"#unity-canvas\");\n    const loadingBar = document.querySelector(\"#unity-loading-bar\");\n    const progressBarFull = document.querySelector(\"#unity-progress-bar-full\");\n    const warningBanner = document.querySelector(\"#unity-warning\");\n    const backendUrl = `https://rngbj.kasoom.com/`;\n    const urlParams = new URLSearchParams(window.location.search);\n    const bankID = urlParams.get('bankId');\n    const token = urlParams.get('token');\n    const operatorID = urlParams.get('operatorID');\n    const tableguid = \"C8C12026C4F04EE4B5900BA017119B52\";\n    const gameid = urlParams.get('gameid');\n    player.activateGame(token).then(initResponse => {\n      var _initResponse$info;\n      console.log('wls url: ', window.location.search);\n      if (!(initResponse !== null && initResponse !== void 0 && (_initResponse$info = initResponse.info) !== null && _initResponse$info !== void 0 && _initResponse$info.userId)) {\n        alert('No user ID.');\n      }\n      let strategy;\n      let dealerKey = 'iqNy5YfOCk';\n      let tableID = initResponse.info.sessionId;\n      let playerID = initResponse.info.userId;\n      player.setPlayer(tableID, playerID);\n      window.addEventListener('offline', () => {\n        console.log('The network connection has been lost.');\n      });\n      window.addEventListener('online', () => {\n        console.log('The network connection has been restored.');\n      });\n      const renderState = state => {\n        if (!state.newPrivatestat) {\n          document.getElementById(\"json\").innerHTML = JSON.stringify(state, undefined, 2);\n        } else {\n          document.getElementById(\"prjson\").innerHTML = JSON.stringify(state, undefined, 2);\n        }\n      };\n      const unityShowBanner = (msg, type) => {\n        const updateBannerVisibility = () => {\n          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';\n        };\n        const div = document.createElement('div');\n        div.innerHTML = msg;\n        warningBanner.appendChild(div);\n        if (type === 'error') {\n          div.style = 'background: red; padding: 10px;';\n        } else {\n          if (type === 'warning') div.style = 'background: yellow; padding: 10px;';\n          setTimeout(() => {\n            warningBanner.removeChild(div);\n            updateBannerVisibility();\n          }, 5000);\n        }\n        updateBannerVisibility();\n      };\n      const buildUrl = \"Build\";\n      const loaderUrl = `${buildUrl}/Blackjack Build.loader.js`;\n      const config = {\n        dataUrl: `${buildUrl}/Blackjack Build.data`,\n        frameworkUrl: `${buildUrl}/Blackjack Build.framework.js`,\n        codeUrl: `${buildUrl}/Blackjack Build.wasm`,\n        streamingAssetsUrl: \"StreamingAssets\",\n        companyName: \"Vivo\",\n        productName: \"Casino Blackjack\",\n        productVersion: \"1.0\",\n        showBanner: unityShowBanner\n      };\n      loadingBar.style.display = \"block\";\n      const script = document.createElement(\"script\");\n      script.src = loaderUrl;\n      script.onload = () => {\n        createUnityInstance(canvas, config, progress => {\n          progressBarFull.style.width = 100 * progress + \"%\";\n        }).then(unityInstance => {\n          loadingBar.style.display = \"none\";\n        }).catch(message => {\n          alert(message);\n        });\n      };\n      document.body.appendChild(script);\n    });\n\n    // XMLHttpRequest patch\n    XMLHttpRequest.prototype.originalOpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function (_, url) {\n      const original = this.originalOpen.apply(this, arguments);\n      if (url.indexOf('https://rngbj.kasoom.com/') === 0) {\n        this.withCredentials = true;\n      }\n      return original;\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"unity-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      id: \"unity-canvas\",\n      width: 960,\n      height: 600,\n      tabIndex: \"-1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"unity-loading-bar\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"unity-logo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"unity-progress-bar-empty\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"unity-progress-bar-full\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"unity-warning\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n};\n_s(UnityComponent, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n_c = UnityComponent;\nexport default UnityComponent;\nvar _c;\n$RefreshReg$(_c, \"UnityComponent\");","map":{"version":3,"names":["React","useEffect","player","io","jsxDEV","_jsxDEV","UnityComponent","_s","container","document","querySelector","canvas","loadingBar","progressBarFull","warningBanner","backendUrl","urlParams","URLSearchParams","window","location","search","bankID","get","token","operatorID","tableguid","gameid","activateGame","then","initResponse","_initResponse$info","console","log","info","userId","alert","strategy","dealerKey","tableID","sessionId","playerID","setPlayer","addEventListener","renderState","state","newPrivatestat","getElementById","innerHTML","JSON","stringify","undefined","unityShowBanner","msg","type","updateBannerVisibility","style","display","children","length","div","createElement","appendChild","setTimeout","removeChild","buildUrl","loaderUrl","config","dataUrl","frameworkUrl","codeUrl","streamingAssetsUrl","companyName","productName","productVersion","showBanner","script","src","onload","createUnityInstance","progress","width","unityInstance","catch","message","body","XMLHttpRequest","prototype","originalOpen","open","_","url","original","apply","arguments","indexOf","withCredentials","id","height","tabIndex","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Jonathan/Documents/GitHub/BlackJackDev/blackjack-app/src/UnityComponent.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport * as player from './playerClient';\nimport io from 'socket.io-client';\nimport './App.css';\n\nconst UnityComponent = () => {\n  useEffect(() => {\n    const container = document.querySelector(\"#unity-container\");\n    const canvas = document.querySelector(\"#unity-canvas\");\n    const loadingBar = document.querySelector(\"#unity-loading-bar\");\n    const progressBarFull = document.querySelector(\"#unity-progress-bar-full\");\n    const warningBanner = document.querySelector(\"#unity-warning\");\n\n    const backendUrl = `https://rngbj.kasoom.com/`;\n    const urlParams = new URLSearchParams(window.location.search);\n    const bankID = urlParams.get('bankId');\n    const token = urlParams.get('token');\n    const operatorID = urlParams.get('operatorID');\n    const tableguid = \"C8C12026C4F04EE4B5900BA017119B52\";\n    const gameid = urlParams.get('gameid');\n\n    player.activateGame(token).then(initResponse => {\n      console.log('wls url: ', window.location.search);\n\n      if (!initResponse?.info?.userId){ \n          alert('No user ID.')\n      }\n\n      let strategy;\n      let dealerKey = 'iqNy5YfOCk';\n      let tableID = initResponse.info.sessionId;\n      let playerID= initResponse.info.userId;\n\n      player.setPlayer(tableID, playerID);\n\n      window.addEventListener('offline', () => {\n        console.log('The network connection has been lost.');\n      });\n\n      window.addEventListener('online', () => {\n        console.log('The network connection has been restored.');\n      });\n\n      const renderState = (state) => {\n        if(!state.newPrivatestat){\n            document.getElementById(\"json\").innerHTML = JSON.stringify(state, undefined, 2);\n        } else {\n            document.getElementById(\"prjson\").innerHTML = JSON.stringify(state, undefined, 2);\n        }\n      };\n\n      const unityShowBanner = (msg, type) => {\n        const updateBannerVisibility = () => {\n          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';\n        };\n\n        const div = document.createElement('div');\n        div.innerHTML = msg;\n        warningBanner.appendChild(div);\n\n        if (type === 'error') {\n          div.style = 'background: red; padding: 10px;';\n        } else {\n          if (type === 'warning') div.style = 'background: yellow; padding: 10px;';\n          setTimeout(() => {\n            warningBanner.removeChild(div);\n            updateBannerVisibility();\n          }, 5000);\n        }\n\n        updateBannerVisibility();\n      };\n\n      const buildUrl = \"Build\";\n      const loaderUrl = `${buildUrl}/Blackjack Build.loader.js`;\n      const config = {\n        dataUrl: `${buildUrl}/Blackjack Build.data`,\n        frameworkUrl: `${buildUrl}/Blackjack Build.framework.js`,\n        codeUrl: `${buildUrl}/Blackjack Build.wasm`,\n        streamingAssetsUrl: \"StreamingAssets\",\n        companyName: \"Vivo\",\n        productName: \"Casino Blackjack\",\n        productVersion: \"1.0\",\n        showBanner: unityShowBanner,\n      };\n\n      loadingBar.style.display = \"block\";\n\n      const script = document.createElement(\"script\");\n      script.src = loaderUrl;\n      script.onload = () => {\n        createUnityInstance(canvas, config, (progress) => {\n          progressBarFull.style.width = 100 * progress + \"%\";\n        }).then(unityInstance => {\n          loadingBar.style.display = \"none\";          \n        }).catch(message => {\n          alert(message);\n        });\n      };\n      document.body.appendChild(script);\n    });\n\n    // XMLHttpRequest patch\n    XMLHttpRequest.prototype.originalOpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function(_, url) {\n      const original = this.originalOpen.apply(this, arguments);\n      if (url.indexOf('https://rngbj.kasoom.com/') === 0) {\n        this.withCredentials = true;\n      }\n      return original;\n    };\n  }, []);\n\n  return (\n    <div id=\"unity-container\">\n      <canvas id=\"unity-canvas\" width={960} height={600} tabIndex=\"-1\"></canvas>\n      <div id=\"unity-loading-bar\">\n        <div id=\"unity-logo\"></div>\n        <div id=\"unity-progress-bar-empty\">\n          <div id=\"unity-progress-bar-full\"></div>\n        </div>\n      </div>\n      <div id=\"unity-warning\"></div>\n    </div>\n  );\n};\n\nexport default UnityComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}