{"ast":null,"code":"import React,{useEffect}from'react';import*as player from'./playerClient';import io from'socket.io-client';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UnityComponent=()=>{useEffect(()=>{const container=document.querySelector(\"#unity-container\");const canvas=document.querySelector(\"#unity-canvas\");const loadingBar=document.querySelector(\"#unity-loading-bar\");const progressBarFull=document.querySelector(\"#unity-progress-bar-full\");const warningBanner=document.querySelector(\"#unity-warning\");const backendUrl=\"https://rngbj.kasoom.com/\";const urlParams=new URLSearchParams(window.location.search);const bankID=urlParams.get('bankId');const token=urlParams.get('token');const operatorID=urlParams.get('operatorID');const tableguid=\"C8C12026C4F04EE4B5900BA017119B52\";const gameid=urlParams.get('gameid');player.activateGame(token).then(initResponse=>{var _initResponse$info;console.log('wls url: ',window.location.search);if(!(initResponse!==null&&initResponse!==void 0&&(_initResponse$info=initResponse.info)!==null&&_initResponse$info!==void 0&&_initResponse$info.userId)){alert('No user ID.');}let strategy;let dealerKey='iqNy5YfOCk';let tableID=initResponse.info.sessionId;let playerID=initResponse.info.userId;player.setPlayer(tableID,playerID);window.addEventListener('offline',()=>{console.log('The network connection has been lost.');});window.addEventListener('online',()=>{console.log('The network connection has been restored.');});const renderState=state=>{if(!state.newPrivatestat){document.getElementById(\"json\").innerHTML=JSON.stringify(state,undefined,2);}else{document.getElementById(\"prjson\").innerHTML=JSON.stringify(state,undefined,2);}};const unityShowBanner=(msg,type)=>{const updateBannerVisibility=()=>{warningBanner.style.display=warningBanner.children.length?'block':'none';};const div=document.createElement('div');div.innerHTML=msg;warningBanner.appendChild(div);if(type==='error'){div.style='background: red; padding: 10px;';}else{if(type==='warning')div.style='background: yellow; padding: 10px;';setTimeout(()=>{warningBanner.removeChild(div);updateBannerVisibility();},5000);}updateBannerVisibility();};const buildUrl=\"Build\";const loaderUrl=\"\".concat(buildUrl,\"/Blackjack Build.loader.js\");const config={dataUrl:\"\".concat(buildUrl,\"/Blackjack Build.data\"),frameworkUrl:\"\".concat(buildUrl,\"/Blackjack Build.framework.js\"),codeUrl:\"\".concat(buildUrl,\"/Blackjack Build.wasm\"),streamingAssetsUrl:\"StreamingAssets\",companyName:\"Vivo\",productName:\"Casino Blackjack\",productVersion:\"1.0\",showBanner:unityShowBanner};loadingBar.style.display=\"block\";const script=document.createElement(\"script\");/*script.src = loaderUrl;\n      script.onload = () => {\n        createUnityInstance(canvas, config, (progress) => {\n          progressBarFull.style.width = 100 * progress + \"%\";\n        }).then(unityInstance => {\n          loadingBar.style.display = \"none\";          \n        }).catch(message => {\n          alert(message);\n        });\n      };*/document.body.appendChild(script);});// XMLHttpRequest patch\nXMLHttpRequest.prototype.originalOpen=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(_,url){const original=this.originalOpen.apply(this,arguments);if(url.indexOf('https://rngbj.kasoom.com/')===0){this.withCredentials=true;}return original;};},[]);return/*#__PURE__*/_jsxs(\"div\",{id:\"unity-container\",children:[/*#__PURE__*/_jsx(\"canvas\",{id:\"unity-canvas\",width:960,height:600,tabIndex:\"-1\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"unity-loading-bar\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"unity-logo\"}),/*#__PURE__*/_jsx(\"div\",{id:\"unity-progress-bar-empty\",children:/*#__PURE__*/_jsx(\"div\",{id:\"unity-progress-bar-full\"})})]}),/*#__PURE__*/_jsx(\"div\",{id:\"unity-warning\"})]});};export default UnityComponent;","map":{"version":3,"names":["React","useEffect","player","io","jsx","_jsx","jsxs","_jsxs","UnityComponent","container","document","querySelector","canvas","loadingBar","progressBarFull","warningBanner","backendUrl","urlParams","URLSearchParams","window","location","search","bankID","get","token","operatorID","tableguid","gameid","activateGame","then","initResponse","_initResponse$info","console","log","info","userId","alert","strategy","dealerKey","tableID","sessionId","playerID","setPlayer","addEventListener","renderState","state","newPrivatestat","getElementById","innerHTML","JSON","stringify","undefined","unityShowBanner","msg","type","updateBannerVisibility","style","display","children","length","div","createElement","appendChild","setTimeout","removeChild","buildUrl","loaderUrl","concat","config","dataUrl","frameworkUrl","codeUrl","streamingAssetsUrl","companyName","productName","productVersion","showBanner","script","body","XMLHttpRequest","prototype","originalOpen","open","_","url","original","apply","arguments","indexOf","withCredentials","id","width","height","tabIndex"],"sources":["C:/Users/Jonathan/Documents/GitHub/BlackJackDev/blackjack-app/src/UnityComponent.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport * as player from './playerClient';\nimport io from 'socket.io-client';\nimport './App.css';\n\nconst UnityComponent = () => {\n  useEffect(() => {\n    const container = document.querySelector(\"#unity-container\");\n    const canvas = document.querySelector(\"#unity-canvas\");\n    const loadingBar = document.querySelector(\"#unity-loading-bar\");\n    const progressBarFull = document.querySelector(\"#unity-progress-bar-full\");\n    const warningBanner = document.querySelector(\"#unity-warning\");\n\n    const backendUrl = `https://rngbj.kasoom.com/`;\n    const urlParams = new URLSearchParams(window.location.search);\n    const bankID = urlParams.get('bankId');\n    const token = urlParams.get('token');\n    const operatorID = urlParams.get('operatorID');\n    const tableguid = \"C8C12026C4F04EE4B5900BA017119B52\";\n    const gameid = urlParams.get('gameid');\n\n    player.activateGame(token).then(initResponse => {\n      console.log('wls url: ', window.location.search);\n\n      if (!initResponse?.info?.userId){ \n          alert('No user ID.')\n      }\n\n      let strategy;\n      let dealerKey = 'iqNy5YfOCk';\n      let tableID = initResponse.info.sessionId;\n      let playerID= initResponse.info.userId;\n\n      player.setPlayer(tableID, playerID);\n\n      window.addEventListener('offline', () => {\n        console.log('The network connection has been lost.');\n      });\n\n      window.addEventListener('online', () => {\n        console.log('The network connection has been restored.');\n      });\n\n      const renderState = (state) => {\n        if(!state.newPrivatestat){\n            document.getElementById(\"json\").innerHTML = JSON.stringify(state, undefined, 2);\n        } else {\n            document.getElementById(\"prjson\").innerHTML = JSON.stringify(state, undefined, 2);\n        }\n      };\n\n      const unityShowBanner = (msg, type) => {\n        const updateBannerVisibility = () => {\n          warningBanner.style.display = warningBanner.children.length ? 'block' : 'none';\n        };\n\n        const div = document.createElement('div');\n        div.innerHTML = msg;\n        warningBanner.appendChild(div);\n\n        if (type === 'error') {\n          div.style = 'background: red; padding: 10px;';\n        } else {\n          if (type === 'warning') div.style = 'background: yellow; padding: 10px;';\n          setTimeout(() => {\n            warningBanner.removeChild(div);\n            updateBannerVisibility();\n          }, 5000);\n        }\n\n        updateBannerVisibility();\n      };\n\n      const buildUrl = \"Build\";\n      const loaderUrl = `${buildUrl}/Blackjack Build.loader.js`;\n      const config = {\n        dataUrl: `${buildUrl}/Blackjack Build.data`,\n        frameworkUrl: `${buildUrl}/Blackjack Build.framework.js`,\n        codeUrl: `${buildUrl}/Blackjack Build.wasm`,\n        streamingAssetsUrl: \"StreamingAssets\",\n        companyName: \"Vivo\",\n        productName: \"Casino Blackjack\",\n        productVersion: \"1.0\",\n        showBanner: unityShowBanner,\n      };\n\n      loadingBar.style.display = \"block\";\n\n      const script = document.createElement(\"script\");\n      /*script.src = loaderUrl;\n      script.onload = () => {\n        createUnityInstance(canvas, config, (progress) => {\n          progressBarFull.style.width = 100 * progress + \"%\";\n        }).then(unityInstance => {\n          loadingBar.style.display = \"none\";          \n        }).catch(message => {\n          alert(message);\n        });\n      };*/\n      document.body.appendChild(script);\n    });\n\n    // XMLHttpRequest patch\n    XMLHttpRequest.prototype.originalOpen = XMLHttpRequest.prototype.open;\n    XMLHttpRequest.prototype.open = function(_, url) {\n      const original = this.originalOpen.apply(this, arguments);\n      if (url.indexOf('https://rngbj.kasoom.com/') === 0) {\n        this.withCredentials = true;\n      }\n      return original;\n    };\n  }, []);\n\n  return (\n    <div id=\"unity-container\">\n      <canvas id=\"unity-canvas\" width={960} height={600} tabIndex=\"-1\"></canvas>\n      <div id=\"unity-loading-bar\">\n        <div id=\"unity-logo\"></div>\n        <div id=\"unity-progress-bar-empty\">\n          <div id=\"unity-progress-bar-full\"></div>\n        </div>\n      </div>\n      <div id=\"unity-warning\"></div>\n    </div>\n  );\n};\n\nexport default UnityComponent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}